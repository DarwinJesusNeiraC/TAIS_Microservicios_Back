service: inventario-service
frameworkVersion: '4'

provider:
  name: aws
  runtime: nodejs18.x
  region: us-east-1
  environment:
    INVENTORY_TABLE: NotasInventarioTable
    PRODUCTS_SERVICE_URL: https://<api_gateway_id>.execute-api.us-east-1.amazonaws.com

functions:
  createNotaEntrada:
    handler: handler.createNotaEntrada
    events:
      - httpApi:
          path: /inventario/nota_entrada
          method: POST

  createNotaSalida:
    handler: handler.createNotaSalida
    events:
      - httpApi:
          path: /inventario/nota_salida
          method: POST

resources:
  Resources:
    NotasInventarioTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: ${env:INVENTORY_TABLE}
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
        KeySchema:
          - AttributeName: id
            KeyType: HASH
        BillingMode: PAY_PER_REQUEST
